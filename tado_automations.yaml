# ============================================================
# TADO CLIMATE HEATING AUTOMATIONS - TIME-BASED SCHEDULING
# ============================================================
# 6 automations for strict time-based setpoint control
# All automations trigger at: 06:00, 08:00, 14:00, 16:00, 18:00, 22:00, and HA start
# Each automation uses choose: logic with weekend/weekday/time conditions
# ============================================================

# ============================================================
# AUTOMATION 1: BAGNO (Bathroom)
# Heat to 23°C from 16:00-22:00, otherwise 20°C
# ============================================================
- alias: "Tado Bagno Heating Schedule"
  description: "Control Bagno temperature based on time windows. Heat to 23°C 16:00-22:00, otherwise 20°C"
  id: "tado_bagno_heating_schedule"
  
  trigger:
    - platform: time
      at: "06:00"
    - platform: time
      at: "08:00"
    - platform: time
      at: "14:00"
    - platform: time
      at: "16:00"
    - platform: time
      at: "18:00"
    - platform: time
      at: "22:00"
    - platform: homeassistant
      event: start
  
  action:
    - choose:
        # Outer gating: only run schedule if the input_boolean for this room is ON
        - conditions:
            - condition: state
              entity_id: input_boolean.bagno_schedule_enabled
              state: "on"
          sequence:
            - choose:
                # HEATING WINDOW: 16:00-22:00
                - conditions:
                    - condition: time
                      after: "16:00"
                      before: "22:00"
                  sequence:
                    - service: climate.set_temperature
                      target:
                        entity_id: climate.bathroom
                      data:
                        temperature: 23
                        hvac_mode: heat
              
              # DEFAULT for gated sequence: Outside heating window -> set 20°C
              default:
                - service: climate.set_temperature
                  target:
                    entity_id: climate.bathroom
                  data:
                    temperature: 20
                    hvac_mode: heat

      # OUTER DEFAULT: schedule disabled -> ensure comfort setpoint is 20°C
      default:
        - service: climate.set_temperature
          target:
            entity_id: climate.bathroom
          data:
            temperature: 20
            hvac_mode: heat

# ============================================================
# AUTOMATION 2: CAMERA LIAM (Liam's Room Camera)
# Weekend: Always 24°C
# Weekday 06:00-08:00: 24°C
# Weekday 18:00-22:00: 24°C
# Otherwise: 20°C
# ============================================================
- alias: "Tado Camera Liam Heating Schedule"
  description: "Control Camera Liam temperature. Heat to 24°C weekdays 06:00-08:00 and 18:00-22:00, all day weekends, otherwise 20°C"
  id: "tado_camera_liam_heating_schedule"
  
  trigger:
    - platform: time
      at: "06:00"
    - platform: time
      at: "08:00"
    - platform: time
      at: "14:00"
    - platform: time
      at: "16:00"
    - platform: time
      at: "18:00"
    - platform: time
      at: "22:00"
    - platform: homeassistant
      event: start
  
  action:
    - choose:
        # Outer gating: only run schedule if the input_boolean for this room is ON
        - conditions:
            - condition: state
              entity_id: input_boolean.camera_liam_schedule_enabled
              state: "on"
          sequence:
            - choose:
                # WEEKEND (Saturday/Sunday): Always heat to 24°C
                - conditions:
                    - condition: template
                      value_template: "{{ now().weekday() >= 5 }}"
                  sequence:
                    - service: climate.set_temperature
                      target:
                        entity_id: climate.liam
                      data:
                        temperature: 24
                        hvac_mode: heat
                
                # WEEKDAY MORNING: 06:00-08:00
                - conditions:
                    - condition: time
                      weekday: [mon, tue, wed, thu, fri]
                      after: "06:00"
                      before: "08:00"
                  sequence:
                    - service: climate.set_temperature
                      target:
                        entity_id: climate.liam
                      data:
                        temperature: 24
                        hvac_mode: heat
                
                # WEEKDAY EVENING: 18:00-22:00
                - conditions:
                    - condition: time
                      weekday: [mon, tue, wed, thu, fri]
                      after: "18:00"
                      before: "22:00"
                  sequence:
                    - service: climate.set_temperature
                      target:
                        entity_id: climate.liam
                      data:
                        temperature: 24
                        hvac_mode: heat
              
              # DEFAULT for gated sequence: Outside active heating windows
              default:
                - service: climate.set_temperature
                  target:
                    entity_id: climate.liam
                  data:
                    temperature: 20
                    hvac_mode: heat

      # OUTER DEFAULT: schedule disabled -> ensure comfort setpoint is 20°C
      default:
        - service: climate.set_temperature
          target:
            entity_id: climate.liam
          data:
            temperature: 20
            hvac_mode: heat

# ============================================================
# AUTOMATION 3: STANZA LIAM (Liam's Bedroom)
# Weekend: Always 24°C
# Weekday 06:00-08:00: 24°C
# Weekday 14:00-22:00: 24°C
# Otherwise: 20°C
# ============================================================
- alias: "Tado Stanza Liam Heating Schedule"
  description: "Control Stanza Liam temperature. Heat to 24°C weekdays 06:00-08:00 and 14:00-22:00, all day weekends, otherwise 20°C"
  id: "tado_stanza_liam_heating_schedule"
  
  trigger:
    - platform: time
      at: "06:00"
    - platform: time
      at: "08:00"
    - platform: time
      at: "14:00"
    - platform: time
      at: "16:00"
    - platform: time
      at: "18:00"
    - platform: time
      at: "22:00"
    - platform: homeassistant
      event: start
  
  action:
    - choose:
        # Outer gating: only run schedule if the input_boolean for this room is ON
        - conditions:
            - condition: state
              entity_id: input_boolean.stanza_liam_schedule_enabled
              state: "on"
          sequence:
            - choose:
                # WEEKEND (Saturday/Sunday): Always heat to 24°C
                - conditions:
                    - condition: template
                      value_template: "{{ now().weekday() >= 5 }}"
                  sequence:
                    - service: climate.set_temperature
                      target:
                        entity_id: climate.bedroom
                      data:
                        temperature: 24
                        hvac_mode: heat
                
                # WEEKDAY MORNING: 06:00-08:00
                - conditions:
                    - condition: time
                      weekday: [mon, tue, wed, thu, fri]
                      after: "06:00"
                      before: "08:00"
                  sequence:
                    - service: climate.set_temperature
                      target:
                        entity_id: climate.bedroom
                      data:
                        temperature: 24
                        hvac_mode: heat
                
                # WEEKDAY AFTERNOON/EVENING: 14:00-22:00
                - conditions:
                    - condition: time
                      weekday: [mon, tue, wed, thu, fri]
                      after: "14:00"
                      before: "22:00"
                  sequence:
                    - service: climate.set_temperature
                      target:
                        entity_id: climate.bedroom
                      data:
                        temperature: 24
                        hvac_mode: heat
              
              # DEFAULT for gated sequence: Outside active heating windows
              default:
                - service: climate.set_temperature
                  target:
                    entity_id: climate.bedroom
                  data:
                    temperature: 20
                    hvac_mode: heat

      # OUTER DEFAULT: schedule disabled -> ensure comfort setpoint is 20°C
      default:
        - service: climate.set_temperature
          target:
            entity_id: climate.bedroom
          data:
            temperature: 20
            hvac_mode: heat

# ============================================================
# AUTOMATION 4: INGRESSO (Entrance/Hallway)
# Weekend: Always 22°C
# Weekday 06:00-08:00: 22°C
# Weekday 14:00-22:00: 22°C
# Otherwise: 20°C
# ============================================================
- alias: "Tado Ingresso Heating Schedule"
  description: "Control Ingresso temperature. Heat to 22°C weekdays 06:00-08:00 and 14:00-22:00, all day weekends, otherwise 20°C"
  id: "tado_ingresso_heating_schedule"
  
  trigger:
    - platform: time
      at: "06:00"
    - platform: time
      at: "08:00"
    - platform: time
      at: "14:00"
    - platform: time
      at: "16:00"
    - platform: time
      at: "18:00"
    - platform: time
      at: "22:00"
    - platform: homeassistant
      event: start
  
  action:
    - choose:
        # Outer gating: only run schedule if the input_boolean for this room is ON
        - conditions:
            - condition: state
              entity_id: input_boolean.ingresso_schedule_enabled
              state: "on"
          sequence:
            - choose:
                # WEEKEND (Saturday/Sunday): Always heat to 22°C
                - conditions:
                    - condition: template
                      value_template: "{{ now().weekday() >= 5 }}"
                  sequence:
                    - service: climate.set_temperature
                      target:
                        entity_id: climate.entrance
                      data:
                        temperature: 22
                        hvac_mode: heat
                
                # WEEKDAY MORNING: 06:00-08:00
                - conditions:
                    - condition: time
                      weekday: [mon, tue, wed, thu, fri]
                      after: "06:00"
                      before: "08:00"
                  sequence:
                    - service: climate.set_temperature
                      target:
                        entity_id: climate.entrance
                      data:
                        temperature: 22
                        hvac_mode: heat
                
                # WEEKDAY AFTERNOON/EVENING: 14:00-22:00
                - conditions:
                    - condition: time
                      weekday: [mon, tue, wed, thu, fri]
                      after: "14:00"
                      before: "22:00"
                  sequence:
                    - service: climate.set_temperature
                      target:
                        entity_id: climate.entrance
                      data:
                        temperature: 22
                        hvac_mode: heat
              
              # DEFAULT for gated sequence: Outside active heating windows
              default:
                - service: climate.set_temperature
                  target:
                    entity_id: climate.entrance
                  data:
                    temperature: 20
                    hvac_mode: heat

      # OUTER DEFAULT: schedule disabled -> ensure comfort setpoint is 20°C
      default:
        - service: climate.set_temperature
          target:
            entity_id: climate.entrance
          data:
            temperature: 20
            hvac_mode: heat

# ============================================================
# AUTOMATION 5: KITCHEN
# Weekend: Always 22°C
# Weekday 06:00-08:00: 22°C
# Weekday 14:00-22:00: 22°C
# Otherwise: 20°C
# ============================================================
- alias: "Tado Kitchen Heating Schedule"
  description: "Control Kitchen temperature. Heat to 22°C weekdays 06:00-08:00 and 14:00-22:00, all day weekends, otherwise 20°C"
  id: "tado_kitchen_heating_schedule"
  
  trigger:
    - platform: time
      at: "06:00"
    - platform: time
      at: "08:00"
    - platform: time
      at: "14:00"
    - platform: time
      at: "16:00"
    - platform: time
      at: "18:00"
    - platform: time
      at: "22:00"
    - platform: homeassistant
      event: start
  
  action:
    - choose:
        # WEEKEND (Saturday/Sunday): Always heat to 22°C
        - conditions:
            - condition: template
              value_template: "{{ now().weekday() >= 5 }}"
          sequence:
            - service: climate.set_temperature
              target:
                entity_id: climate.kitchen
              data:
                temperature: 22
                hvac_mode: heat
        
        # WEEKDAY MORNING: 06:00-08:00
        - conditions:
            - condition: time
              weekday: [mon, tue, wed, thu, fri]
              after: "06:00"
              before: "08:00"
          sequence:
            - service: climate.set_temperature
              target:
                entity_id: climate.kitchen
              data:
                temperature: 22
                hvac_mode: heat
        
        # WEEKDAY AFTERNOON/EVENING: 14:00-22:00
        - conditions:
            - condition: time
              weekday: [mon, tue, wed, thu, fri]
              after: "14:00"
              before: "22:00"
          sequence:
            - service: climate.set_temperature
              target:
                entity_id: climate.kitchen
              data:
                temperature: 22
                hvac_mode: heat
      
      # DEFAULT: Outside active heating windows
      default:
        - service: climate.set_temperature
          target:
            entity_id: climate.kitchen
          data:
            temperature: 20
            hvac_mode: heat

# ============================================================
# AUTOMATION 6: SALA (Living Room)
# Always 24°C - No time restrictions, no weekend override needed
# ============================================================
- alias: "Tado Sala Heating Schedule"
  description: "Control Sala temperature. Always heat to 24°C all days"
  id: "tado_sala_heating_schedule"
  
  trigger:
    - platform: time
      at: "06:00"
    - platform: time
      at: "08:00"
    - platform: time
      at: "14:00"
    - platform: time
      at: "16:00"
    - platform: time
      at: "18:00"
    - platform: time
      at: "22:00"
    - platform: homeassistant
      event: start
  
  action:
    # ALWAYS: Keep heating to 24°C (no conditions needed)
    - service: climate.set_temperature
      target:
        entity_id: climate.sala
      data:
        temperature: 24
        hvac_mode: heat
